<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Minimal Kanban</title>
  </head>
  <body>
    <div
      style="
        padding: 12px;
        font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial;
      "
    >
      <input id="txt" placeholder="task" />
      <select id="col">
        <option value="todo">To Do</option>
        <option value="doing">Doing</option>
        <option value="done">Done</option>
      </select>
      <button id="add">Add</button>
    </div>

    <div id="board" style="display: flex; gap: 12px; padding: 12px">
      <div
        id="todo"
        ondragover="event.preventDefault()"
        ondrop="drop(event)"
        style="border: 1px solid #000; flex: 1; min-height: 200px; padding: 8px"
      >
        <h3>To Do</h3>
      </div>
      <div
        id="doing"
        ondragover="event.preventDefault()"
        ondrop="drop(event)"
        style="border: 1px solid #000; flex: 1; min-height: 200px; padding: 8px"
      >
        <h3>Doing</h3>
      </div>
      <div
        id="done"
        ondragover="event.preventDefault()"
        ondrop="drop(event)"
        style="border: 1px solid #000; flex: 1; min-height: 200px; padding: 8px"
      >
        <h3>Done</h3>
      </div>
    </div>

    <script>
      const addBtn = document.getElementById("add");
      const txt = document.getElementById("txt");
      addBtn.onclick = () => {
        const v = txt.value.trim();
        if (!v) return;
        const col = document.getElementById(
          document.getElementById("col").value
        );
        const card = makeCard(v);
        col.appendChild(card);
        txt.value = "";
      };

      function makeCard(text) {
        const el = document.createElement("div");
        el.className = "card";
        el.draggable = true;
        el.ondragstart = (ev) =>
          ev.dataTransfer.setData("text/plain", ev.target.id);
        el.style.padding = "6px";
        el.style.margin = "6px 0";
        el.style.border = "1px solid #666";
        el.style.cursor = "grab";
        el.id = "c_" + Math.random().toString(36).slice(2, 9);

        const t = document.createElement("span");
        t.textContent = text;
        t.style.marginRight = "8px";

        const del = document.createElement("button");
        del.textContent = "delete";
        del.onclick = (e) => {
          e.stopPropagation();
          el.remove();
        };
        del.style.float = "right";
        del.style.border = "none";
        del.style.background = "transparent";
        del.style.cursor = "pointer";

        el.appendChild(t);
        el.appendChild(del);
        return el;
      }

      function drop(ev) {
        ev.preventDefault();
        const id = ev.dataTransfer.getData("text/plain");
        const node = document.getElementById(id);
        if (node) ev.currentTarget.appendChild(node);
      }

      // allow clicking a column to move a selected card (minimal keyless support)
      document.getElementById("board").addEventListener("click", (e) => {
        const c = e.target.closest(".card");
        if (!c) return;
        // toggle selection
        c.style.outline = c.style.outline ? "" : "2px dashed #333";
      });

      // quick keyboard: Delete removes selected card
      document.addEventListener("keydown", (e) => {
        if (e.key === "Delete") {
          document.querySelectorAll(".card").forEach((c) => {
            if (c.style.outline) c.remove();
          });
        }
      });
    </script>
  </body>
</html>
